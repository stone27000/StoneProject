# --- 1. 伺服器設定 (Server) ---
# 設定 Spring Boot 內嵌的 Tomcat 伺服器運行的埠號 (Port)
server.port=8080

# --- 2. 資料庫連線 (DataSource) ---
# (JPA) 告訴 Hibernate (JPA 的實作) 我們使用的是 MySQL 資料庫的 SQL 語法
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# 資料庫連線 URL
# (連線到本地 3306 埠號的 'bigwork' 資料庫)
# (設定時區為台北、使用 UTF-8 編碼、不使用 SSL、允許公鑰檢索)
spring.datasource.url=jdbc:mysql://localhost:3306/bigwork?serverTimezone=Asia/Taipei&useUnicode=true&characterEncoding=UTF-8&useSSL=false&allowPublicKeyRetrieval=true
# 您的 MySQL 資料庫使用者名稱
spring.datasource.username=root
# 您的 MySQL 資料庫密碼
spring.datasource.password=1234

# (效能) Hikari 連線池設定：最大連線數 (預設 10)
spring.datasource.hikari.maximum-pool-size=10
# (效能) Hikari 連線池設定：最小閒置連線數
spring.datasource.hikari.minimum-idle=2

# --- 3. JPA & Hibernate 設定 ---
# (開發用) 在主控台(Console)顯示 JPA 執行的 SQL 語句
spring.jpa.show-sql=true
# (開發用) 將顯示的 SQL 語句進行美化 (自動排版)
spring.jpa.properties.hibernate.format_sql=true

# (安全/開發) 資料庫結構定義 (DDL) 策略
# validate: 啟動時「驗證」(validate) Java POJO 和資料庫 Table 是否一致，不一致則啟動失敗。
# (其他選項： create=每次重建, update=自動更新, none=不做任何事)
spring.jpa.hibernate.ddl-auto=validate

# --- 4. 電子郵件 (JavaMailSender) 設定 ---
# (用於註冊驗證碼、忘記密碼)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=//gmail
# (重要！) 這不是您的 Gmail 密碼，而是您在 Google 帳戶設定中產生的「應用程式密碼」
spring.mail.password=

# 啟用 SMTP 伺服器認證
spring.mail.properties.mail.smtp.auth=true
# 啟用 STARTTLS (建立加密連線)
spring.mail.properties.mail.smtp.starttls.enable=true

# --- 5. 日誌 (Logging) 等級設定 ---
# (開發用) 將我們自己寫的 demo.bigwork 套件日誌設為 DEBUG (最詳細)
logging.level.demo.bigwork=DEBUG
# Spring 框架的日誌設為 INFO (標準資訊)
logging.level.org.springframework=INFO
# Hibernate 的日誌設為 WARN (只顯示警告和錯誤)
logging.level.org.hibernate=WARN

# --- 6. 自訂屬性 (Custom Properties) ---
# (安全) JWT 簽章用的密鑰 (Base64 編碼)，會注入到 JwtUtil 中
jwt.secret=C8GsX/YRTpE/oMDQCLOcJvrlCud35d2/uSRwLBZJx/zBRAAsWvGDYZKQKOo=
 
# JWT 的過期時間 (86400000 毫秒 = 24 小時)
jwt.expiration.ms=86400000

# (關鍵！) 檔案上傳路徑。
# "./uploads" 代表「相對於 JAR 檔案執行位置」的 "uploads" 資料夾
# 這會注入到 FileStorageServiceImpl 中
file.storage.location=./uploads

# (檔案) 限制單一檔案上傳最大為 10MB
spring.servlet.multipart.max-file-size=10MB
# (檔案) 限制整個 HTTP 請求(可含多檔案)最大為 10MB
spring.servlet.multipart.max-request-size=10MB

# (關鍵！) 告訴後端 (UserService)：您的「前端」重設密碼頁面在哪裡
# (用於組合忘記密碼時的 Email 連結)
frontend.reset-password-url=http://127.0.0.1:5500/html/reset-password.html

# --- ECPay 綠界金流設定 ---
ecpay.merchantId=3002607
ecpay.hashKey=pwFHCqoQZGmho4w6
ecpay.hashIV=EkRm7iFT261dpevs
ecpay.serviceUrl=https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5
# 在本地開發時，不能寫 localhost，必須用 Ngrok
ecpay.return.url=https://gayla-unbriefed-unreluctantly.ngrok-free.dev/notify
# 支付成功後，使用者點擊「返回商店」會跳轉到的前端頁面
ecpay.client.back.url=http://127.0.0.1:5500/html/cart.html
